csdl_goc=[["CSDL quan hệ là?", "tập hợp các bản dữ liệu không\n có liên quan với nhau", "tập hợp các bản dữ liệu có\n liên quan với nhau", "thực hiện các thao tác thêm,\n sửa, xóa", "tìm kiếm dữ liệu và kết xuất\n thông tin", 2, 0], ["Truy vấn trong CSDL quan hệ\n là:", "Tìm kiếm dữ liệu và kết xuất\n ra thông tin cần tìm", "Thao tác thêm, sửa, xóa", "Tạo mối quan hệ giữa các bảng", "Ràng buộc dữ liệu", 1, 0], ["Phát biểu nào sau đây là SAI\n về các ràng buộc dữ liệu\n", "Trong một bảng, không có hai\n bản ghi nào giống nhau hoàn\n", "Trong một bảng, mỗi trường có\n một tên để phân biệt với tất\n", "Mỗi bảng có một tên để phân\n biệt với các bảng khác trong\n", "Mỗi ô của bảng chứa một hay\n nhiều giá trị", 4, 0], ["Chọn phát biểu ĐÚNG  trong\n các phát biểu sau:", "Nếu hai bản ghi khác nhau thì\n giá trị khóa của chúng phải\n", "Trong CSDL quan hệ, mỗi bảng\n chỉ có 1 khóa", "Khóa của một bảng chỉ là một\n trường", "Không thể cập nhật dữ liệu\n cho một bảng khi đã chọn\n", 1, 0], ["Trong một bảng gồm các\n trường: CCCD, Họ và tên,\nTa chọn trường nào sau đây\n", "CCCD", "Họ và tên", "Ngày sinh", "Điểm tin", 1, 0], ["Khái niệm \"khóa ngoài\" của\n một bảng:", "Một trường (hay một số\n trường) của bảng này và đồng\nbảng khác", "Một trường trong bảng được sử\n dụng để xác định các giá trị\n", "Một trường trong bảng chứa\n giá trị ngày tháng", "Một trường trong bảng chứa\n giá trị số", 1, 0], ["Liên kết giữa hai bảng trong\n CSDL được thực hiện thông\n", "khóa chính – khóa ngoài", "khóa chính – khóa chính", "khóa ngoài – khóa ngoài", "khóa trong – khóa phụ", 1, 0], ["Để tạo biểu mẫu ta chọn đối\n tượng nào trên bảng chọn đối\n", "Queries", "Forms", "Tables", "Reports", 2, 0], ["Trong Access, ta có thể sử\n dụng biểu mẫu để:", "Tính toán cho các trường tính\n toán", "Sửa cấu trúc bảng", "Xem, nhập và sửa dữ liệu", "Lập báo cáo", 3, 0], ["Trong Access, muốn tạo biểu\n mẫu theo cách dùng thuật sĩ,\nn thanh công cụ ta chọn lệnh:", "Form Design", "Form Wizard", "Blank Form", "Form", 2, 0], ["Muốn nhanh chóng có được biểu\n mẫu theo ý mình, ta có thể", "dùng công cụ thiết kế biểu\n mẫu tự động, sau đó điều\n mẫu thân thiện, thuận tiện\n", "dùng biểu mẫu có sẵn trên\n phần mềm ứng dụng", "sử dụng khóa ngoài của bảng\n để thực hiện ghép nối dữ\n", "sử dụng khóa chính của bảng\n để thực hiện ghép nối dữ\n", 1, 0], ["Các hệ quản trị CSDL quan hệ\n thường cung cấp", "công cụ tạo lập nhanh chóng\n những biểu mẫu cho xem dữ\n", "những biểu mẫu hiển thị", "các thuộc tính của đối tượng", "ngôn ngữ lập trình", 1, 0], ["Phát biểu nào sau đây là sai?", "Việc cập nhật dữ liệu trong\n biểu mẫu thực chất là cập\nliệu nguồn", "Việc nhập dữ liệu bằng cách\n sử dụng biểu mẫu sẽ thuận\ni sót hơn", "Có thể sử dụng bảng ở chế độ\n trang dữ liệu để cập nhật dữ\n", "Khi tạo biểu mẫu để nhập dữ\n liệu thì bắt buộc phải xác\nu", 4, 0], ["Truy vấn CSDL là:", "Một tập hợp các bảng dữ liệu\n có liên quan với nhau", "Một phát biểu thể hiện yêu\n cầu của người dùng đối với\n", "Là cung cấp một khuôn dạng\n thuận tiện để nhập và sửa dữ\n", "Cung cấp các nút lệnh để\n người dùng có thể sử dụng", 2, 0], ["Ngôn ngữ truy vấn CSDL phổ\n biến hiện nay là:", "Access", "Excel", "Word", "SQL", 4, 0], ["Trong SQL, ngôn ngữ định\n nghĩa dữ liệu bao gồm các\n", "Tạo, sửa và xóa cấu trúc quan\n hệ. Bảo mật và quyền truy\n", "Bảo mật và quyền truy nhập.", "Tạo, sửa và xóa cấu trúc quan\n hệ. Thêm cột, sửa cột và xoá\n", "Tạo, sửa và xóa các bộ quan\n hệ. Bảo mật và quyền truy\n", 1, 0], ["Cấu trúc cơ bảnCâu truy vấn\n vào một bảng dữ liệu như\nc_trường FROM tên_bảng [WHERE\n ngăn cách nhau bởi dấu nào?", "dấu ba chấm", "dấu chấm", "dấu chấm phẩy", "dấu phẩy", 4, 0], ["Em hãy điền vào chỗ trống (…)\n cho phát biểu dưới đây: “\nn, hệ quản trị CSDL sẽ coi\nh thì cần phải dùng các dấu\n", "( )", "‘ ’", "[ ]", "“ ”", 3, 0], ["Trong mẫuCâu truy vấn của\n SQL, em hãy cho biết mệnh đề\n", "Xác định điều kiện lọc dữ\n liệu", "Xác định dữ liệu được lấy từ\n đâu", "Sửa dữ liệu trong bảng", "Xác định thông tin ta muốn\n hiển thị", 1, 0], ["Trong mẫuCâu truy vấn của\n SQL, em hãy cho biết mệnh đề\n", "Xác định điều kiện lọc dữ\n liệu", "Thêm dữ liệu vào bảng", "Xác định dữ liệu được lấy từ\n đâu", "Xác định thông tin ta muốn\n hiển thị", 4, 0], ["Trong mẫuCâu truy vấn của\n SQL, em hãy cho biết mệnh đề\n", "Xác định điều kiện lọc dữ\n liệu", "Xác định dữ liệu được lấy từ\n đâu", "Xác định thông tin ta muốn\n hiển thị", "Xóa dữ liệu trong bảng", 4, 0], ["Trong quá trình phát triển\n ứng dụng, truy vấn CSDL có\nế nào?", "Chỉ dùng để thêm dữ liệu mới", "Đảm bảo tính bảo mật của CSDL", "Liên kết dữ liệu từ nhiều\n bảng khác nhau", "Giữ cho hệ thống hoạt động ổn\n định", 3, 0], ["Hệ thống quản lí học sinh của\n trường em là một hệ CSDL\n", "Hệ CSDL phân tán", "Hệ CSDL khách - chủ", "Hệ CSDL tập trung", "Hệ CSDL cá nhân", 3, 0], ["Cơ sở dữ liệu tập trung là\n gì?", "CSDL tập trung là tập hợp dữ\n liệu được phân tán trên các\n", "CSDL tập trung có toàn bộ dữ\n liệu được lưu trữ trên một\n", "các thành phần của CSDL tương\n tác với nhau tạo nên hệ\n tài nguyên và thành phần cấp\n", "những hệ thống cho phép người\n dùng truy cập không chỉ dữ\n liệu để ở xa.", 2, 0], ["Các kiến trúc phổ biến của hệ\n CSDL tập trung là:", "Kiến trúc khách - chủ mà CSDL\n thường đặt trên một máy chủ", "Kiến trúc khách - chủ, kiến\n trúc ngang hàng", "Kiến trúc khách - chủ mà CSDL\n đặt trên nhiều máy chủ", "Kiến trúc ngang hàng", 1, 0], ["Các kiến trúc phổ biến của hệ\n CSDL phân tán là:", "Kiến trúc khách-chủ, kiến\n trúc tầng 1, kiến trúc tầng\n", "Kiến trúc khách – chủ, kiến\n trúc ngang hàng", "Kiến trúc khách -chủ", "Kiến trúc ngang hàng", 2, 0], ["Trong cácCâu sau đây,Câu nào\n đúng?", "CSDL luôn chỉ được lưu trữ và\n khái thác tại một máy chủ.", "Trong hệ CSDL tập trung, việc\n quản lí và cập nhật dữ liệu\nhân tán.", "Trong tất cả các hệ CSDL, nếu\n có sự cố không truy cập được\n hệ thống CSDL đó ngừng hoạt\n", "Một hệ CSDL tập trung đắt hơn\n  so với một hệ CSDL phân tán\n", 2, 0], ["Phát biểu nào ĐÚNG khi nói về\n hệ CSDL tập trung?", "Hệ CSDL tập trung khó khăn\n hơn trong đảm bảo tính nhất\ninh", "Hệ CSDL tập trung chi phí cao\n hơn hệ CSDL phân tán", "Trong quá trình khai thác,\n nếu hệ CSDL tập trung gặp sự\nng dụng CSDL không thể chạy\n", "Hệ CSDL tập trung có thể cho\n nhiều người truy cập cùng\n", 3, 0], ["Các yếu tố tham gia trong\n việc bảo mật hệ thống như\nin cần phải", "Không được thay đổi để đảm\n bảo tính nhất quán", "Chỉ nên thay đổi nếu người\n dùng có yêu cầu", "Phải thường xuyên thay đổi để\n tằng cường tính bảo mật", "Chỉ nên thay đổi một lần sau\n khi người dùng đăng nhập vào\n", 3, 0], ["Bảo vệ sự an toàn của hệ CSDL\n là rất quan trọng vì:", "Bất kì một hỏng hóc hay mất\n mát nào cũng sẽ ảnh hưởng\na một tổ chức và hiệu suất\n", "Rất nhiều loại dữ liệu được\n tải về giữ trên các máy cục\n", "Một bộ sưu tập rất lớn về các\n loại dữ liệu tác nghiệp", "Truy xuất vào cơ sở dữ liệu\n bằng nhiều ngôn ngữ thao tác\n", 1, 0], ["Thông thường, người dùng muốn\n truy cập vào hệ CSDL cần\n", "Hình ảnh", "Tên tài khoản và mật khẩu", "Họ tên người dùng", "Chữ ký", 2, 0], ["Phát biểu nào dưới\n đây không phải là bảo mật\nệ CSDL?", "Khống chế số người sử dụng\n CSDL", "Hạn chế tối đa các sai sót\n của người dùng", "Đảm bảo thông tin không bị\n mất hoặc bị thay đổi ngoài ý\n", "Ngăn chặn các truy cập không\n được phép", 1, 0], ["Phát biểu nào dưới đây SAI\n khi nói về mã hoá thông tin?", "Các thông tin quan trọng và\n nhạy cảm nên lưu trữ dưới\n", "Mã hoá thông tin để giảm khả\n năng rò rỉ thông tin", "Nén dữ liệu cũng góp phần\n tăng cường tính bảo mật của\n", "Các thông tin sẽ được an toàn\n tuyệt đối sau khi đã được mã\n", 4, 0], ["Access là gì?", "Phần mềm hệ quản trị CSDL", "Phần mềm trò chơi", "Phần mềm hệ thống", "Thiết bị phần cứng", 1, 0], ["Trong cửa sổ làm việc Access\n các thẻ (tab): File, Home,\nbase Tools… thuộc:", "Vùng nút lệnh", "Vùng điều hướng", "Vùng làm việc", "Vùng thay đổi khung nhìn", 1, 0], ["Vùng điều hướng của cửa sổ\n làm việc của Access hiển thị\n", "Các thẻ File, Home, Create,\n External Data…", "Các đối tượng trong CSDL", "Các nút lệnh để thay đổi\n khung nhìn", "Nội dung của đối tượng", 2, 0], ["Có mấy khung nhìn bảng:", "2", "3", "4", "5", 1, 0], ["Một cơ sở dữ liệu của Acess\n 365 có bao nhiêu thành phần\n", "1 thành phần duy nhất là vùng\n nút lệnh", "4 thành phần : vùng nút lệnh,\n vùng điều hướng, vùng làm\nnhìn", "6 thành phần : Tables,\n Queries, Forms, Reports,\n", "7 thành phần : Tables,\n Queries, Forms, Reports,\ns", 4, 0], ["Để tạo cơ sở dữ liệu mới từ\n Blank desktop database tại\n ta có các thao tác sau: \nh Create Trình tự thực hiện\n", "(1)  (2) (3)", "(2)  (1) (3)", "(3)  (2) (1)", "(1)  (3) (2)", 2, 0], ["Một bảng điểm học sinh trong\n Access có các cột chứa điểm\này ta chọn kiểu dữ liệu nào?", "AutoNumber", "Number", "Long Text", "Yes/No", 2, 0], ["Trong khung nhìn thiết kế\n bảng, để chọn kiểu dữ liệu\nọn ở cột nào?", "Field Properties", "Field Name", "Data Type", "Description", 3, 0], ["Để nhập dữ liệu cho bảng, ta\n phải hiển thị bảng ở:", "khung nhìn thiết kế", "khung nhìn bảng dữ liệu", "khung nhìn thiết kế và khung\n nhìn bảng dữ liệu", "bất kì khung nhìn nào cũng\n được", 2, 0], ["Trong Access, để tạo đối\n tượng mới ta nháy chuột chọn\n", "File", "Home", "Create", "Database Tools", 3, 0], ["Ở khung nhìn thiết kế, để\n chọn một cột làm khóa chính,\nvào nút lệnh:", "Delete Rows", "Inser Rows", "Insert Colunns", "Primary Key", 4, 0], ["Trong Access nói riêng và\n CSDL quan hệ nói chung, giữa\n hệ:", "một – một (1-1)", "một – nhiều (1-∞)", "một – một (1-1) hoặc một –\n nhiều (1-∞)", "một – một (1-1) và một –\n nhiều (1-∞)", 3, 0], ["Điều kiện cần để tạo được\n liên kết là", "Phải có ít nhất hai bảng", "Phải có ít nhất một bảng và\n một mẫu hỏi", "Phải có ít nhất một bảng mà\n một biểu mẫu", "Tổng số bảng và mẫu hỏi ít\n nhất là 2", 1, 0], ["Muốn xóa liên kết giữa hai\n bảng, trong cửa sổ\nn", "Chọn hai bảng và nhấn phím\n Delete", "Chọn đường liên kết giữa hai\n bảng đó và nhấn phím Delete", "Chọn tất cả các bảng và nhấn\n phím Delete", "Nháy nút lệnh Edit\n Relationship", 2, 0], ["Điều kiện để tạo mối liên kết\n giữa hai bảng là", "Trường liên kết của hai bảng\n phải có tên giống nhau và\n", "Trường liên kết của hai bảng\n phải là chữ hoa, có cùng\n", "Trường liên kết của hai bảng\n phải là kiểu dữ liệu số", "Trường liên kết của hai bảng\n phải khác nhau", 1, 0], ["Để tạo quan hệ giữa hai bảng\n thì ta làm sao?", "Kéo thả trường khóa ngoài của\n bảng con vào trường khóa\n", "Kéo thả trường khóa ngoài của\n bảng con vào 1 trường bất kì\n", "Kéo thả trường khóa chính của\n bảng mẹ vào 1 trường bất kì\n", "Kéo thả 1 trường của bảng con\n vào 1 trường của bảng mẹ", 1, 0], ["Nhận định nào sau đây là SAI?", "Để xóa một liên kết, nháy đúp\n vào đường nối thể hiện liên\n Delete", "Để xóa một liên kết, nháy\n chuột vào đường nối thể hiện\nnhấn phím Delete", "Để sửa liên kết, nháy đúp vào\n đường nối thể hiện liên kết\nationships.", "Để mở vùng làm việc với các\n mối quan hệ, ta chọn\nps", 1, 0], ["Nội dung nào sau đây SAI về\n liên kết các bảng trong cơ\n", "Access có trình tiện ích\n Lookout Wizard giúp thiết\noài và khóa chính giữa hai\n", "Một bảng có thể liên kết với\n nhiều bảng khác", "Các thao tác thiết lập, chỉnh\n sửa, xóa mối quan hệ giữa\nbằng chọn Database Tools\\\n", "Thiết lập kiểu dữ liệu từ tra\n cứu sẽ đảm bảo toàn vẹn tham\n", 1, 0]]
#Khi tạo chương trình 1 biến tên csdl_goc lưu trữ dữ liệu của câu gỏi sẽ ở vị trí này


#Khai báo các thư viện
from tkinter import *
import random
import time
from tkinter.ttk import Combobox
from tkinter import  messagebox
import copy
import threading


class RoundedButton(Canvas):#đối tượng này là nút có góc tròn, dùng để chứa các câu trả lời

    def __init__(self, master=None, text:str="", radius=25, btnforeground="#000000", btnbackground="#ffffff", clicked=None, *args, **kwargs):
        super(RoundedButton, self).__init__(master, *args, **kwargs)
        self.config(bg=self.master["bg"])
        self.btnbackground = btnbackground
        self.clicked = clicked

        self.radius = radius  
   
        self.rect = self.round_rectangle(0, 0, 0, 0, tags="button", radius=radius, fill=btnbackground)
        self.text = self.create_text(0, 0, text=text, tags="button", fill=btnforeground, font=("Times", 9), justify="center")

        self.tag_bind("button", "<ButtonPress>", self.border)
        self.tag_bind("button", "<ButtonRelease>", self.border)
        self.bind("<Configure>", self.resize)
   
        text_rect = self.bbox(self.text)
        if int(self["width"]) < text_rect[2]-text_rect[0]:
            self["width"] = (text_rect[2]-text_rect[0]) + 10
   
        if int(self["height"]) < text_rect[3]-text_rect[1]:
            self["height"] = (text_rect[3]-text_rect[1]) + 10
    def doimau(self,mau_nen,mau_chu):
        self.btnbackground = mau_nen
        self.btnforeground = mau_chu
        self.itemconfig(self.rect, fill=self.btnbackground)
        self.itemconfig(self.text, fill=self.btnforeground)
    def round_rectangle(self, x1, y1, x2, y2, radius=25, update=False, **kwargs): # if update is False a new rounded rectangle's id will be returned else updates existing rounded rect.
        # source: https://stackoverflow.com/a/44100075/15993687
        points = [x1+radius, y1,
                x1+radius, y1,
                x2-radius, y1,
                x2-radius, y1,
                x2, y1,
                x2, y1+radius,
                x2, y1+radius,
                x2, y2-radius,
                x2, y2-radius,
                x2, y2,
                x2-radius, y2,
                x2-radius, y2,
                x1+radius, y2,
                x1+radius, y2,
                x1, y2,
                x1, y2-radius,
                x1, y2-radius,
                x1, y1+radius,
                x1, y1+radius,
                x1, y1]

        if not update:
            return self.create_polygon(points, **kwargs, smooth=True)
   
        else:
            self.coords(self.rect, points)

    def resize(self, event):
        text_bbox = self.bbox(self.text)

        if self.radius > event.width or self.radius > event.height:
            radius = min((event.width, event.height))

        else:
            radius = self.radius

        width, height = event.width, event.height

        if event.width < text_bbox[2]-text_bbox[0]:
            width = text_bbox[2]-text_bbox[0] + 30
   
        if event.height < text_bbox[3]-text_bbox[1]:
            height = text_bbox[3]-text_bbox[1] + 30
   
        self.round_rectangle(5, 5, width-5, height-5, radius, update=True)

        bbox = self.bbox(self.rect)

        x = ((bbox[2]-bbox[0])/2) - ((text_bbox[2]-text_bbox[0])/2)
        y = ((bbox[3]-bbox[1])/2) - ((text_bbox[3]-text_bbox[1])/2)

        self.moveto(self.text, x, y)

    def border(self, event):
        if event.type == "4":
            if self.clicked is not None:
                self.clicked()

        else:
            self.itemconfig(self.rect, fill=self.btnbackground)
    def set_button_color(self, color):
        self.itemconfig(self.rect, fill=color)
def tat_chuong_trinh():#hàm tắt chương trình
    root.destroy()
def doi_mau(nut,mau):#hàm để đổi màu 1 nút
    nut.config(bg=mau)
def vo_hieu_4_nut():#làm mất trạng thái hoạt động,mất màu của 4 câu trả lời
    a.config(state=DISABLED)
    b.config(state=DISABLED)
    c.config(state=DISABLED)
    d.config(state=DISABLED)
    a.doimau("gray","white")
    b.doimau("gray","white")
    c.doimau("gray","white")
    d.doimau("gray","white")



def switch():#hàm này làm đổi văn bản trong nút có liên kết với hàm này từ "ON" sang "OFF" và ngược lại
    global is_on,on_button

    if is_on:
        on_button.config(text="OFF")

        is_on = False
    else:
 
        on_button.config(text="ON")

        is_on = True

def tg_c_cauhoi(box_tg,tg_lam_bai):
    global tg_chuyen_cau_hoi,thoigiandelambai,sl_ch,biencamco
    tg_chuyen_cau_hoi=box_tg.get()


    sl_ch=int(so_luong_cau_hoi.get())
    if thoigiandelambai!="Không giới hạn":
        biencamco=True
        thoigiandelambai=int(thoigiandelambai)*60+1
    else:
        biencamco=False

def ktinput(n,tg_lam_bai,tgchuyencauhoi):
    #Khi ấn nút "BẮT ĐẦU" hàm này hoạt động để kiểm tra các đầu vào có thỏa mãn điều kiện không,
    #Nếu có thì bắt đầu làm trắc nghiệm ngược lại thì không có gì xảy ra
    global csdl_goc,box_tg,thoigiandelambai,tg_chuyen_cau_hoi,SO_LUONG_CAU_TRA_LOI_DUNG,csdl_goc,csdl,sl_ch
    csdl=copy.copy(csdl_goc)
    tg_chuyen_cau_hoi=int(tgchuyencauhoi)
    if( not n.isdigit()):return
    if int(n)>len(csdl_goc) or int(n)<=0:
        return
    sl_ch=n
    thoigiandelambai=tg_lam_bai.get()
 
    tg_c_cauhoi(box_tg,tg_lam_bai)
    SO_LUONG_CAU_TRA_LOI_DUNG=0
    main()
def xem_lai():#hàm này xóa hết mọi thứ trên màn hình rồi Gọi hàm main() để xem lại bài hàm
    global nut2,sl_ch,thoigiandelambai,caudung
    global stt,screen_width,screen_height,csdl,csdl_goc
    global cau_hoi,a,b,c,d,bo_qua,biencamco,lui,dau,cua_so,nut_lam_lai,nut_thoat,nut_xem_lai,diemso,hienthimeme,image_label
    global tg_chuyen_cau_hoi,dulieu,stt_cauhoi
    stt=0
    cua_so.destroy()
    nut_lam_lai.destroy()
    nut_thoat.destroy()
    nut_xem_lai.destroy()
    diemso.destroy()
    main(True)
def lam_lai(cua_so, nut_lam_lai, nut_thoat):#hàm này xóa mọi thứ trên màn hình và gọi hàm menu để làm lại bài trắc nghiệm
    global csdl,sl_ch,thoigiandelambai,biencamco,on,off
    global stt,screen_width,screen_height
    global cau_hoi,a,b,c,d,canvas,csdl_goc,sl_ch
    global tg_chuyen_cau_hoi,on,off,is_on,on_button,SO_LUONG_CAU_TRA_LOI_DUNG
    for i in range (sl_ch):
        csdl_goc[i][6]=0
    stt=0
    cua_so.destroy()
    nut_lam_lai.destroy()
    nut_thoat.destroy()
    canvas.destroy()
    is_on=True
    csdl=copy.copy(csdl_goc)
    menu()
    root.mainloop()
def Nop_Bai(co_phai_xem_lai_khong=False):#hàm nộp bài (nếu đang trong chế độ xem lại thì hàm này  có nội dung là quay lại)

    global stt,a,b,c,d,cauhoi,cau_hoi,canvas,csdl,screen_width,screen_height,image,tg_chuyen_cau_hoi,bo_qua,is_on,button_exit,button_setting, button_next,thoigiandelambai,sl_ch,biencamco
    global dulieu,button_lui,button_dau,dau,lui,stt_cauhoi,SO_LUONG_CAU_TRA_LOI_DUNG
    global cua_so,nut_lam_lai,nut_thoat,nut_xem_lai,diemso,hienthimeme,image_label #các nút,label,ảnh
    if Kiem_tra_xem_da_lam_het_cac_cau_hoi_chua(co_phai_xem_lai_khong):
        thoigiandelambai=0
        canvas.destroy()
        a.destroy()
        b.destroy()
        c.destroy()
        d.destroy()
        if not co_phai_xem_lai_khong:
            for i in range(sl_ch):
                if csdl[i][5]==csdl[i][6] :
                    SO_LUONG_CAU_TRA_LOI_DUNG+=1
   

        left = screen_width/3.2
        top = screen_height*10/100
        right = screen_width-screen_width/3.2
        bottom = screen_width*55/100
        cua_so=Canvas(root,bg="white",height=screen_height,width=screen_width)
        cua_so.place(x=0,y=0)
        ti=round(SO_LUONG_CAU_TRA_LOI_DUNG/sl_ch,4)

        ti=ti*100
        ti=round(ti,2)



   
        diemso=Label(root,text=f"Trả lời đúng: {SO_LUONG_CAU_TRA_LOI_DUNG}/{sl_ch}\nTỉ lệ: {ti}%",bd=0,compound="center",font=("Arial",15),fg=("#7FFF00" if ti>=50 else "red"))
        diemso.place(x=screen_width*20//100,y=screen_height*50//100)


        #nút làm lại


        nut_lam_lai=Button(root,text="LÀM LẠI",bd=0,compound="center",font=("Arial",15),command= lambda : lam_lai(cua_so, nut_lam_lai, nut_thoat))

        nut_lam_lai.place(x=screen_width*20//100,y=screen_height*20/100)#vị trí nút làm lại

        #nút xem lại
        nut_xem_lai=Button(root,text="XEM LẠI",bd=0,compound="center",font=("Arial",15),command= lambda : xem_lai())

        nut_xem_lai.place(x=screen_width*20//100,y=screen_height*30/100)#vị trí nút làm lại


   
        #nút thoát
        nut_thoat=Button(root,text="THOÁT",bd=0,compound="center",font=("Arial",15),command=tat_chuong_trinh)
        nut_thoat.place(x=screen_width*20//100,y=screen_height*40/100)#vị trí nút thoát
        root.mainloop()


def start_delayed_task():#tạo ra 1 luồng riêng để có thể thao tác khi chương trình đang trong thời gian chờ để chuyển câu hỏi
    thread = threading.Thread(target=delayed_task)
    thread.start()
kt=False#biến này là 1 biến cầm cờ, nếu chương trình đang trong thời gian chờ để chuyển câu hỏi mà người dùng thao tác thì chương trình sẽ không thực hiện
# việc chuyển câu hỏi trước đó nữa
def delayed_task():
    global nut2,sl_ch,thoigiandelambai,caudung
    global stt,screen_width,screen_height,csdl,csdl_goc
    global cau_hoi,a,b,c,d,bo_qua,biencamco,lui,dau,thoat_khoi_chuyen_cau_hoi
    global tg_chuyen_cau_hoi,dulieu,stt_cauhoi,SO_LUONG_CAU_TRA_LOI_DUNG,kt



    if kt==True:
        return
    kt=True
    if int(tg_chuyen_cau_hoi)>0:#nếu có thời gian chuyển câu hỏi thì chương trình sẽ chờ trong khoảng thời gian đó
        for i in range(10000):
            time.sleep(int(tg_chuyen_cau_hoi)/10000)
        kt=False
    kt=False
    if stt!=sl_ch-1:#nếu câu hỏi hiện tại khác câu cuối cùng thì tự chuyển sang câu hỏi tiếp theo
        chuyen_cau_hoi(1)

def chuyen_sang_cau_hoi_tiep_theo(nut,cau_tra_loi,dap_an):#khi người dùng ấn chọn đáp án thì sử dụng hàm start_delayed_task() để tự chuyển câu hỏi
    global nut2,sl_ch,thoigiandelambai,caudung
    global stt,screen_width,screen_height,csdl,csdl_goc
    global cau_hoi,a,b,c,d,bo_qua,biencamco,lui,dau,thoat_khoi_chuyen_cau_hoi
    global tg_chuyen_cau_hoi,dulieu,stt_cauhoi,SO_LUONG_CAU_TRA_LOI_DUNG,kt
    if stt<sl_ch:
        csdl[stt][6]=cau_tra_loi
    a.doimau("white","black")
    b.doimau("white","black")
    c.doimau("white","black")
    d.doimau("white","black")
    nut.doimau("yellow","black")
    root.update()
    if stt==sl_ch-1:
        return
   
    start_delayed_task()






def xoa_cd(canvas2,box_tg):#phá cài đặt để tiếp tục làm bài
    global tg_chuyen_cau_hoi
    tg_chuyen_cau_hoi=int(box_tg.get())#cập nhật thời gian chuyển câu hỏi
 

    canvas2.destroy()
 
def tao_cd():#chuyển sang cài đặt
    global tg_chuyen_cau_hoi

    canvas2 = Canvas(canvas,width=screen_width,height=screen_height,bg="white")#tạo canvas
    canvas2.place(x=0,y=0)

    Label (canvas2,text="",font=("Times New Roman",22),bg="white",width=int(screen_width/18),height=int(screen_height/70)).place(x=int(screen_width/100),y=int(screen_height/50))
    Label(canvas2,text="Thời gian chuyển câu hỏi",font=("Arial",9),bg="white").place(x=screen_width*5/100,y=screen_height*5/100)

    #combobox để người dùng cập nhật thời gian chuyển câu hỏi
    #các lựa chọn của combobox
    tg=['0','1','2','3','4','5','6','7']
    # Khởi tạo combobox
    box_tg = Combobox(canvas2,font=("Arial",9),width=13,values=tg,state="readonly")
    box_tg.place(x=screen_width*30/100,y=screen_height*8/100)
   
    # Thiết lập giá trị mặc định cho combobox
    box_tg.set(tg_chuyen_cau_hoi)

    tg_chuyen_cau_hoi=box_tg.get()


  
    #nút quaylai này sẽ quá màn hình cài đặt đang hoạt động
    quaylai=Button(canvas2,text="<=",font=("Arial",9),command= lambda : xoa_cd(canvas2,box_tg),bg="#FF3478",activebackground="#FF3478", relief="flat", borderwidth=0)

    quaylai.place(x=screen_width*80//100,y=screen_height*10/100)


def show_failure_message():#người dung hết thời gian làm bài
    global stt
    #hỏi xem người dùng còn muốn làm bài không, nếu chọn "yes" thì không có gì xảy ra
    #nếu chọn "no" thì gọi hàm Nop_Bai để nộp bài
    answer = messagebox.askquestion("Tiếp tục?", "Bạn đã hết thời gian\n làm bài trắc nghiệm\nbạn muốn tiếp tục không?")
    if answer == 'no':
        Nop_Bai()
       
#Khi người dùng nộp bài hàm này sẽ hỏi lại xem họ có chắc là muốn nộp bài không và nhắc về những câu hỏi chưa làm 
def Kiem_tra_xem_da_lam_het_cac_cau_hoi_chua(co_phai_xem_lai_khong):
    global sl_ch,csdl
    if co_phai_xem_lai_khong: return True#nếu đang trong chế độ xem lại thì bỏ qua hàm này
    cac_cau_hoi_chua_lam=''
    for i in range(sl_ch):
        if csdl[i][6]==0:
            cac_cau_hoi_chua_lam+=str(i+1)+", "
    if not len(cac_cau_hoi_chua_lam):
        answer2 = messagebox.askquestion("Đã làm hết tất cả câu hỏi?","Bạn có muốn nộp bài không")
    else:
        answer2 = messagebox.askquestion("Chưa làm hết câu hỏi?", "Bạn chưa làm các câu hỏi\n"+cac_cau_hoi_chua_lam+"\nbạn có muốn nộp bài không")
    if answer2=="yes":
        return True#người dùng quyết định nộp bài
    else:
        return False#người không nộp bài


def start_timer(thoigianlambai):
    global thoigiandelambai
   
    # Hàm countdown sẽ giảm thời gian và cập nhật giao diện sau mỗi giây.
    def countdown():
        global thoigiandelambai
        if thoigiandelambai == 0:
            return
        # Giảm thời gian đi một đơn vị.
        thoigiandelambai -= 1
        phut = thoigiandelambai // 60
        giay = thoigiandelambai % 60
        if giay < 10:
            giay = "0" + str(giay)
        # Cập nhật nhãn với thời gian còn lại.
        thoigianlambai.config(text=f"{phut}:{giay}")
       
        # Nếu thời gian đã hết, hiển thị thông báo thất bại.
        if thoigiandelambai == 0:
            show_failure_message()
            return
       
        # Gọi lại hàm countdown sau 1 giây.
        root.after(1000, countdown)
   
    # Bắt đầu đếm ngược.
    countdown()


def chuyen_cau_hoi(n,co_phai_xem_lai_khong=False):
    global a,b,c,d,cau_hoi,stt,canvas,csdl,screen_width,screen_height,image,tg_chuyen_cau_hoi,bo_qua,is_on,button_exit,button_setting, button_next,thoigiandelambai,sl_ch,biencamco
    global dulieu,stt,lui,dau,stt_cauhoi

    co=True

    if stt+n<=0:
        co=False
        lui.destroy()
        dau.destroy()
    if stt>0:
        lui.destroy()
        dau.destroy()


    stt=stt+n
    dulieu=csdl[stt]
    mau_nen_cua_nut=["white","white","white","white"]
    if int(dulieu[6])!=0 and not co_phai_xem_lai_khong:
        mau_nen_cua_nut[int(dulieu[6])-1]="yellow"




    cauhoi= dulieu[0]
    dap_an_a= dulieu[1]
    dap_an_b= dulieu[2]
    dap_an_c= dulieu[3]
    dap_an_d= dulieu[4]
    dapan=dulieu[5]
    a.destroy()
    b.destroy()
    c.destroy()
    d.destroy()
    cau_hoi.destroy()
    bo_qua.destroy()
    stt_cauhoi.destroy()
    root.update()


    text_cauhoi=cauhoi
    dap_an_a= dulieu[1]
    dap_an_b= dulieu[2]
    dap_an_c= dulieu[3]
    dap_an_d= dulieu[4]
    dapan=dulieu[5]
    cau_hoi=Label (canvas,text=text_cauhoi,font=("Times New Roman",9),bg="white",width=int(screen_width*5.3)//100,height=screen_height//115)
    cau_hoi.place(x=10,y=screen_height*6//100)
    root.update()
    stt_cauhoi=Label (canvas,text=stt+1,width=int(screen_width/300),font=("Times New Roman",9),bg="yellow")
    stt_cauhoi.place(x=0,y=0)
    #nếu số lượng câu hỏi khác1 và câu hỏi hiện tại không phải câu cuối cùng thì tạo ra nút chuyển tiếp câu hỏi
    if sl_ch!=1 and stt!=sl_ch-1 :
        bo_qua=Button(canvas,text=">>",font=("Arial",9),command= lambda :chuyen_cau_hoi(1,co_phai_xem_lai_khong),bg="#DDA0DD",activebackground="yellow", width=screen_width//400,relief="flat", borderwidth=0)
        bo_qua.place(x=screen_width*50//100,y=screen_height*1/100)
    #nếu không phai câu đầu tiên thì tạo nút chuyển về câu hỏi trước và nút chuyển đến câu hỏi đầu tiên
    if stt!=0 and co:
        lui=Button(canvas,text="<<",font=("Arial",9),command= lambda :chuyen_cau_hoi(-1,co_phai_xem_lai_khong),bg="#DDA0DD",activebackground="yellow", relief="flat",width=screen_width//400, borderwidth=0)
        lui.place(x=screen_width*38//100,y=screen_height*1/100)
        dau=Button(canvas,text="|<",font=("Arial",9),command = lambda :chuyen_cau_hoi(-stt,co_phai_xem_lai_khong),bg="#DDA0DD",activebackground="yellow",width=screen_width//400, relief="flat", borderwidth=0)
        dau.place(x=screen_width*26//100,y=screen_height*1/100)
    #tạo các cấu trả lời
    a = RoundedButton(
        canvas,
        text=dap_an_a,
        radius=100,
        width=screen_width,
        height=screen_height *15// 100,
        btnbackground=mau_nen_cua_nut[0],
        btnforeground="black",
        clicked=lambda: chuyen_sang_cau_hoi_tiep_theo(a, "1", dapan)
    )
    a.place(x=0,y=screen_height*40//100)
   
    b = RoundedButton(
        canvas,
        text=dap_an_b,
        radius=100,
        width=screen_width,
        height=screen_height*15/100,
        btnbackground=mau_nen_cua_nut[1],
        btnforeground="black",
        clicked=lambda: chuyen_sang_cau_hoi_tiep_theo(b, "2", dapan)
    )
    b.place(x=0,y=screen_height*55//100)

    c = RoundedButton(
        canvas,
        text=dap_an_c,
        radius=100,
        width=screen_width,
        height=screen_height*15/100,
        btnbackground=mau_nen_cua_nut[2],
        btnforeground="black",
        clicked=lambda: chuyen_sang_cau_hoi_tiep_theo(c, "3", dapan)
    )
    c.place(x=0,y=screen_height*70//100)
   
    d = RoundedButton(
        canvas,
        text=dap_an_d,
        radius=100,
        width=screen_width,
        height=screen_height*15/100,
        btnbackground=mau_nen_cua_nut[3],
        btnforeground="black",
        clicked=lambda: chuyen_sang_cau_hoi_tiep_theo(d, "4", dapan)
    )
    d.place(x=0,y=screen_height*85/100)
    #màu nền cho các nút câu trả lời
    a.config(bg="#FF3478")
    b.config(bg="#FF3478")
    c.config(bg="#FF3478")
    d.config(bg="#FF3478")
    #nếu đang trong chế độ xem lại thì vô hiệu 4 nút trên để người dùng không chọn được mà chỉ có thể xem đồng thời đổi màu cho chúng
    if co_phai_xem_lai_khong:
        vo_hieu_4_nut()
   
        if csdl[stt][6]=='1':
            a.doimau("#FF3300","black")
        elif csdl[stt][6]=='2':
            b.doimau("#FF3300","black")
        elif csdl[stt][6]=='3':
            c.doimau("#FF3300","black")
        elif csdl[stt][6]=='4':
            d.doimau("#FF3300","black")
       
        if csdl[stt][5]=='1':
            a.doimau("#00FF33","black")
        elif csdl[stt][5]=='2':
            b.doimau("#00FF33","black")
        elif csdl[stt][5]=='3':
            c.doimau("#00FF33","black")
        elif csdl[stt][5]=='4':
            d.doimau("#00FF33","black")
    root.update()


#hàm dùng để trộn các câu hỏi và câu trả lời
def tron(arr):
    a=random.randint(1,4)
    if(a==1):
        arr[int(arr[5])],arr[1]=arr[1],arr[int(arr[5])]
        arr[5]="1"
        values=[arr[2],arr[3],arr[4]]
        random.shuffle(values)
        arr[2],arr[3],arr[4]=values
    elif(a==2):
        arr[int(arr[5])],arr[2]=arr[2],arr[int(arr[5])]
        arr[5]="2"
        values=[arr[1],arr[3],arr[4]]
        random.shuffle(values)
        arr[1],arr[3],arr[4]=values
    elif(a==3):
        arr[int(arr[5])],arr[3]=arr[3],arr[int(arr[5])]
        arr[5]="3"
        values=[arr[1],arr[2],arr[4]]
        random.shuffle(values)
        arr[1],arr[2],arr[4]=values
    else:
        arr[int(arr[5])],arr[4]=arr[4],arr[int(arr[5])]
        arr[5]="4"
        values=[arr[1],arr[2],arr[3]]
        random.shuffle(values)
        arr[1],arr[2],arr[3]=values
    return arr

#khi chưa làm bài khai báo số thứ tự của câu chuẩn bị làm là 0
stt=0
def main(co_phai_xem_lai_khong=False):

    global stt,a,b,c,d,cauhoi,cau_hoi,canvas,csdl,screen_width,screen_height,image,tg_chuyen_cau_hoi,bo_qua,is_on,button_exit,button_setting, button_next,thoigiandelambai,sl_ch,biencamco
    global dulieu,button_lui,button_dau,dau,lui,stt_cauhoi,SO_LUONG_CAU_TRA_LOI_DUNG,stop_flag
    #nếu người dùng chọn trộn câu hỏi và đang trong chế độ làm bài chương trình sẽ trộn câu hỏi và 4 câu trả lời
    if is_on and not co_phai_xem_lai_khong:
   
        for i in range(len(csdl)):
            csdl[i]=tron(csdl[i])
        random.shuffle(csdl)
    #tạo dùng canvas
    canvas = Canvas(root,width=screen_width,height=screen_height,bg="#FF3478")
    canvas.place(x=0,y=0)      
    #lấy dữ liệu ra
    dulieu=csdl[stt]
    cauhoi= dulieu[0]
    text_cauhoi=cauhoi
    dap_an_a= dulieu[1]
    dap_an_b= dulieu[2]
    dap_an_c= dulieu[3]
    dap_an_d= dulieu[4]
    dapan=dulieu[5]
    #hiển thị câu hỏi ,số thứ tự câu hỏi và 4 phương án trả lời
    cau_hoi=Label (canvas,text=text_cauhoi,font=("Times New Roman",9),bg="white",width=int(screen_width*5.3)//100,height=screen_height//115)
    cau_hoi.place(x=0,y=screen_height*6//100)


    stt_cauhoi=Label (canvas,text=stt+1,width=int(screen_width/300),font=("Times New Roman",9),bg="yellow")
    stt_cauhoi.place(x=0,y=0)
    mau_nen_cua_nut=["white","white","white","white"]
    if int(dulieu[6])!=0:
        mau_nen_cua_nut[int(dulieu[6])-1]="yellow"
    a = RoundedButton(
        canvas,
        text=dap_an_a,
        radius=100,
        width=screen_width,
        height=screen_height *15// 100,
        btnbackground=mau_nen_cua_nut[0],
        btnforeground="black",
        clicked=lambda: chuyen_sang_cau_hoi_tiep_theo(a, "1", dapan)
    )
    a.place(x=0,y=screen_height*40//100)
   
    b = RoundedButton(
        canvas,
        text=dap_an_b,
        radius=100,
        width=screen_width,
        height=screen_height*15/100,
        btnbackground=mau_nen_cua_nut[1],
        btnforeground="black",
        clicked=lambda: chuyen_sang_cau_hoi_tiep_theo(b, "2", dapan)
    )
    b.place(x=0,y=screen_height*55//100)

    c = RoundedButton(
        canvas,
        text=dap_an_c,
        radius=100,
        width=screen_width,
        height=screen_height*15/100,
        btnbackground=mau_nen_cua_nut[2],
        btnforeground="black",
        clicked=lambda: chuyen_sang_cau_hoi_tiep_theo(c, "3", dapan)
    )
    c.place(x=0,y=screen_height*70//100)
   
    d = RoundedButton(
        canvas,
        text=dap_an_d,
        radius=100,
        width=screen_width,
        height=screen_height*15/100,
        btnbackground=mau_nen_cua_nut[3],
        btnforeground="black",
        clicked=lambda: chuyen_sang_cau_hoi_tiep_theo(d, "4", dapan)
    )
    d.place(x=0,y=screen_height*85/100)
    #màu nền cho các nút câu trả lời
    a.config(bg="#FF3478")
    b.config(bg="#FF3478")
    c.config(bg="#FF3478")
    d.config(bg="#FF3478")
    #nếu đang trong chế độ xem lại thì vô hiệu 4 nút trên để người dùng không chọn được mà chỉ có thể xem đồng thời đổi màu cho chúng
    if co_phai_xem_lai_khong:
        vo_hieu_4_nut()
   
        if csdl[stt][6]=='1':
            a.doimau("#FF3300","black")
        elif csdl[stt][6]=='2':
            b.doimau("#FF3300","black")
        elif csdl[stt][6]=='3':
            c.doimau("#FF3300","black")
        elif csdl[stt][6]=='4':
            d.doimau("#FF3300","black")
       
        if csdl[stt][5]=='1':
            a.doimau("#00FF33","black")
        elif csdl[stt][5]=='2':
            b.doimau("#00FF33","black")
        elif csdl[stt][5]=='3':
            c.doimau("#00FF33","black")
        elif csdl[stt][5]=='4':
            d.doimau("#00FF33","black")
        stop_flag = False
    #nút phá màn hình
    xoa=Button(canvas,text="X",font=("Arial",9),command = tat_chuong_trinh,bg="red",activebackground="yellow", relief="flat", borderwidth=0)
    xoa.place(x=screen_width*87/100,y=screen_height*1/100)

    #nút cài đặt
    cd=Button(canvas,text="CĐ",font=("Arial",9),command= tao_cd,bg="red",activebackground="yellow", relief="flat", borderwidth=0)
    cd.place(x=screen_width*65//100,y=screen_height*1/100)
    #dùng câu lệnh rẽ nhánh để tìm câu trả lời
    if dapan=="1" :
        nut2=a
    elif dapan=="2":
        nut2=b
    elif dapan=="3":
        nut2=c
    elif dapan=="4":
        nut2=d
    #nếu số lượng câu hỏi khác 1 và đang ở câu số 2 về sau thì tạo nút chuyển câu hỏi
    if sl_ch!=1 and stt!=2:
        bo_qua=Button(canvas,text=">>",font=("Arial",9),command= lambda :chuyen_cau_hoi(1,co_phai_xem_lai_khong),bg="#DDA0DD",activebackground="yellow", width=screen_width//400,relief="flat", borderwidth=0)
        bo_qua.place(x=screen_width*50//100,y=screen_height*1/100)
    #nút nộp bài liên kết với hàm Nop_Bai, nếu đang xem lại thì văn bản trên nút là "Q.LẠI"
    nop_bai=Button(canvas,text="Q.LẠI" if co_phai_xem_lai_khong else "NỘP BÀI",command=lambda :Nop_Bai(co_phai_xem_lai_khong),width=screen_width//200,font=("Arial",9))
    nop_bai.place(x=screen_width*7//100,y=screen_height*1/100)
    #nếu người dùng có lựa chọn thời gian làm bài thì gọi biến start_timer
    if(biencamco):
        thoigianlambai=Label(root,text="",font=("Arial",8),bg="white",width=screen_width*2//250,height=screen_height//900)
        thoigianlambai.place(x=(screen_width*86//100),y=screen_height*6/100)
        start_timer(thoigianlambai)
    root.update()
    root.mainloop()




csdl= copy.copy(csdl_goc)#copy dữ liệu từ csdl gốc
tg_chuyen_cau_hoi=0


root=Tk()
#thông số màn hình bằng thông số màn hình thiết bị
screen_height = root.winfo_screenheight()
screen_width = root.winfo_screenwidth()
root.geometry(f"{screen_width}x{screen_height}")
#mặc định sẽ chuyển câu hỏi
is_on = True
#Hàm để người dùng thiết lập làm trắc nghiệm
def menu():
    global box_tg, so_luong_cau_hoi, on_button, is_on
    # Tạo canvas và đặt các thuộc tính.
    canvas = Canvas(root, width=screen_width, height=screen_height, bg="#FF3478")
    canvas.place(x=0, y=0)
    canvas2 = Canvas(canvas, width=screen_width, height=screen_height*60//100, bg="white")
    canvas2.place(x=0, y=screen_height*15//100)

    # Tạo nút để đóng cửa sổ.
    xoa = Button(canvas, text="X", font=("Arial", 22), command=tat_chuong_trinh, bg="red", activebackground="yellow", relief="flat", borderwidth=0)
    xoa.place(x=screen_width*80//100, y=screen_height*3//100)

    # Tiêu đề của ứng dụng.
    ten = Label(canvas, text="ỨNG DỤNG TRẮC NGHIỆM", font=("Arial", 13), fg="red", width=int(screen_width*1.5/50), height=int(screen_height/400), bg="white")
    ten.place(x=screen_width*2//100, y=screen_height*18//100)

    # Giao diện chọn thời gian chuyển câu hỏi.
    Label(canvas, text="Thời gian chuyển câu hỏi\nkhi làm bài(giây)", font=("Arial", 9), bg="white").place(x=screen_width*2//100, y=screen_height*34//100)
    tg = ['0', '1', '2', '3', '4', '5', '6', '7']
    box_tg = Combobox(canvas, font=("Arial", 9), width=screen_width//100, values=tg, state="readonly")
    box_tg.place(x=screen_width*64//100, y=screen_height*35/100)
    box_tg.set(tg_chuyen_cau_hoi)  # Đặt giá trị mặc định.

    # Giao diện cho việc bật/tắt trộn câu hỏi.
    Label(canvas, text="Trộn câu hỏi", font=("Arial", 9), bg="white").place(x=screen_width*2//100, y=screen_height*44//100)
    on_button = Button(canvas, text="ON", bd=0, bg="white", activebackground="white", command=switch)
    on_button.place(x=screen_width*55//100, y=screen_height*44/100)

    # Giao diện chọn thời gian làm bài.
    Label(canvas, text="Thời gian làm bài (phút)", font=("Arial", 9), bg="white").place(x=screen_width*2/100, y=screen_height*51//100)
    tglambai=["Không giới hạn",5,10,15,20,25,30,40,50,60,70,80,90,100,120]
    tg_lam_bai = Combobox(canvas, font=("Arial", 9), width=screen_width*2//100, values=tglambai, state="readonly")
    tg_lam_bai.place(x=screen_width*55//100, y=screen_height*51/100)
    tg_lam_bai.set(tglambai[0])  # Đặt giá trị mặc định.

    # Giao diện nhập số lượng câu hỏi.
    so_luong_cau_hoi = StringVar(value=str(len(csdl_goc)))
    Label(canvas, text="Số lượng câu hỏi", font=("Arial", 9), bg="white").place(x=screen_width*2//100, y=screen_height*58//100)
    Entry(canvas, font=("Arial", 9), bg="white", textvariable=so_luong_cau_hoi, width=screen_width//200).place(x=screen_width*55/100, y=screen_height*58//100)
    Label(canvas, text=f"(>0;<={len(csdl_goc)})", font=("Arial", 9), bg="white").place(x=screen_width*62/100, y=screen_height*58//100)

    # Nút bắt đầu làm bài.
    bat_dau = Button(canvas, text="BẮT ĐẦU", font=("Arial", 9), width=int(screen_width/150), height=int(screen_height/400), command=lambda: ktinput(so_luong_cau_hoi.get(), tg_lam_bai, box_tg.get()))
    bat_dau.place(x=screen_width//2-screen_width//300*16, y=screen_height*64//100)

# Gọi hàm menu để hiển thị giao diện.
menu()

#vòng lặp chính
root.mainloop()   
